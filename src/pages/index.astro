---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
const allPosts = await getCollection("posts");

const publicPosts = allPosts.filter(post => {
  return !(post.data.isDraft && import.meta.env.PROD)
})

---

<BaseLayout>
  <ul class="list">
    {
      publicPosts.map((post) => (
        <li>
          <a href={`/posts/${post.slug}`}>{post.data.title}</a>
        </li>
      ))
    }
  </ul>
</BaseLayout>

<style>

  .list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

</style>
